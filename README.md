# 感情絵文字アプリ (Emotion Emoji App)

リアルタイムで顔の表情から感情を検出し、対応する絵文字を表示するWebアプリケーションです。

![感情絵文字アプリのデモ](https://img.shields.io/badge/JavaScript-ES6+-yellow) ![Face API](https://img.shields.io/badge/Face--API.js-1.7.2-blue) ![HTML5](https://img.shields.io/badge/HTML5-Canvas-orange)

## 🎯 機能

- **リアルタイム感情検出**: Webカメラを使用して顔の表情から感情をリアルタイムで検出
- **絵文字表示**: 検出された感情に応じた絵文字を顔の上に表示
- **感情の確率表示**: 各感情の検出確率をパーセンテージで表示
- **スナップショット機能**: 現在の表情をキャプチャして保存
- **顔枠表示**: 検出された顔に青い枠を描画

### 検出可能な感情

| 感情 | 絵文字 | 英語名 |
|------|--------|--------|
| 喜び | 😄 | happy |
| 悲しみ | 😢 | sad |
| 怒り | 😠 | angry |
| 驚き | 😲 | surprised |
| 恐怖 | 😨 | fearful |
| 嫌悪 | 🤢 | disgusted |
| 無表情 | 😐 | neutral |

## 🚀 実行手順

### 1. 環境要件

- **ブラウザ**: Chrome、Firefox、Safari、Edge（最新版推奨）
- **Webカメラ**: 内蔵カメラまたは外付けカメラ
- **HTTPS環境**: カメラアクセスには必須（ローカル開発時は`localhost`でも可）

### 2. アプリケーションの起動

#### 方法1: ローカルサーバーを使用（推奨）

```bash
# Python 3の場合
python3 -m http.server 8000

# Python 2の場合
python -m SimpleHTTPServer 8000

# Node.jsのhttp-serverを使用する場合
npx http-server -p 8000
```

#### 方法2: VS Code Live Server拡張機能を使用

1. VS Codeで`index.html`を開く
2. 右クリック → "Open with Live Server"

#### 方法3: 直接ファイルを開く（非推奨）

ブラウザで`index.html`を直接開くことも可能ですが、カメラアクセスが制限される場合があります。

### 3. アプリケーションの使用

1. **ブラウザでアクセス**: `http://localhost:8000`を開く
2. **モデル読み込み待機**: 初回アクセス時は顔認識モデルの読み込みに数秒かかります
3. **カメラ許可**: ブラウザからカメラアクセス許可を求められたら「許可」をクリック
4. **カメラ開始**: 「カメラ開始」ボタンをクリック
5. **表情作成**: カメラに向かって様々な表情を作ってみてください
6. **結果確認**: 顔の上に絵文字が表示され、右側に感情の詳細が表示されます

## 🛠️ 技術仕様

### 使用技術

- **フロントエンド**: HTML5、CSS3、Vanilla JavaScript (ES6+)
- **顔認識ライブラリ**: [face-api.js](https://github.com/vladmandic/face-api) v1.7.2
- **機械学習モデル**: TinyFaceDetector + FaceExpressionNet

### ファイル構成

```
emotion-emoji-app/
├── index.html          # メインHTML画面
├── style.css           # スタイルシート
├── script.js           # メインJavaScriptロジック
└── README.md           # このファイル
```

### 主要な機能説明

#### 感情検出アルゴリズム

1. **顔検出**: TinyFaceDetectorを使用して高速に顔を検出
2. **特徴点抽出**: 68個の顔の特徴点を抽出
3. **表情分析**: CNNベースのモデルで7つの基本感情を分析
4. **確率計算**: 各感情の確率を0-1の範囲で算出

#### パフォーマンス最適化

- **検出間隔**: 200ms間隔で顔検出を実行
- **軽量モデル**: TinyFaceDetectorで高速処理
- **キャンバス最適化**: 必要な部分のみ再描画

## 🎮 使い方のコツ

### 良好な検出のために

- **十分な照明**: 顔がはっきり見える明るさで使用
- **正面向き**: カメラに対して正面を向く
- **表情をはっきり**: 大げさなくらいの表情の方が検出されやすい
- **安定した位置**: 顔の位置を大きく動かさない

### よくある問題と対処法

| 問題 | 原因 | 解決方法 |
|------|------|----------|
| カメラが開始しない | ブラウザの許可不足 | ブラウザの設定でカメラアクセスを許可 |
| 感情が検出されない | 照明不足または顔が不明瞭 | 照明を改善し、正面を向く |
| 動作が重い | 古いブラウザまたは低スペックPC | 最新ブラウザの使用またはタブを閉じる |
| モデル読み込みエラー | ネットワーク接続問題 | インターネット接続を確認 |

## 🔒 プライバシー

- **データ送信なし**: すべての処理はブラウザ内で完結
- **画像保存なし**: スナップショット以外の画像は保存されません
- **外部送信なし**: 顔データや感情データは外部サーバーに送信されません

## 🤝 貢献

バグ報告や機能改善の提案は大歓迎です！

## 📝 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🙏 謝辞

- [face-api.js](https://github.com/vladmandic/face-api) - 優秀な顔認識ライブラリ
- [TensorFlow.js](https://www.tensorflow.org/js) - ブラウザ内機械学習を可能にするフレームワーク

---

🎉 **楽しい感情検出をお楽しみください！** 😄
